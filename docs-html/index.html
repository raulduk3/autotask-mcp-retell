<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Autotask MCP Server - v0.1.0</title><meta name="description" content="Documentation for Autotask MCP Server"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">Autotask MCP Server - v0.1.0</a><div id="tsd-toolbar-links"><a href="https://github.com/raulduk3/autotask-mcp-retell">GitHub</a></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>Autotask MCP Server - v0.1.0</h1></div><div class="tsd-panel tsd-typography"><h1 id="autotask-mcp-for-retell" class="tsd-anchor-link">Autotask MCP for Retell<a href="#autotask-mcp-for-retell" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>A memory-conscious, stateful Model Context Protocol (MCP) server for creating Autotask tickets via Retell AI voice agents.</p>
<h2 id="features" class="tsd-anchor-link">Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><strong>Stateful Architecture</strong>: Maintains session state with proper memory management</li>
<li><strong>Memory Efficient</strong>: Singleton server instance reused across all sessions</li>
<li><strong>Session Management</strong>: UUID-based sessions with automatic cleanup</li>
<li><strong>Server-Sent Events (SSE)</strong>: Supports streaming responses via GET endpoint</li>
<li><strong>Resumability</strong>: SSE reconnection support with Last-Event-ID header</li>
<li><strong>Streamable HTTP Transport</strong>: Uses MCP SDK's StreamableHTTPServerTransport</li>
<li><strong>Modular Design</strong>: Separate files for server, tools, and API calls</li>
<li><strong>Two-Factor Authentication</strong>: Bearer token authentication + IP whitelist</li>
<li><strong>HITL Security</strong>: Human-in-the-loop IP whitelisting with warnings for unknown IPs</li>
<li><strong>Proper Error Codes</strong>: JSON-RPC compliant error codes (-32000, -32603, -32600, etc.)</li>
<li><strong>Easy to Extend</strong>: Simple process for adding new tools</li>
</ul>
<h2 id="architecture" class="tsd-anchor-link">Architecture<a href="#architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This implementation follows the MCP TypeScript SDK's streamable HTTP pattern:</p>
<h3 id="endpoints" class="tsd-anchor-link">Endpoints<a href="#endpoints" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>
<p><strong>POST /mcp</strong> - Main MCP endpoint for initialization and tool calls</p>
<ul>
<li>Initialize: Send JSON-RPC initialize request (generates session ID)</li>
<li>Tool Calls: Include <code>mcp-session-id</code> header with existing session ID</li>
</ul>
</li>
<li>
<p><strong>GET /mcp</strong> - Server-Sent Events (SSE) endpoint for streaming</p>
<ul>
<li>Requires <code>mcp-session-id</code> header</li>
<li>Supports resumability via <code>Last-Event-ID</code> header</li>
</ul>
</li>
<li>
<p><strong>DELETE /mcp</strong> - Session termination</p>
<ul>
<li>Requires <code>mcp-session-id</code> header</li>
<li>Properly cleans up session resources</li>
</ul>
</li>
</ul>
<h3 id="memory-management" class="tsd-anchor-link">Memory Management<a href="#memory-management" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Single MCP server instance shared across all sessions (memory efficient)</li>
<li>Transport instances stored per session in a map</li>
<li>Automatic cleanup when transport closes</li>
<li>Graceful shutdown closes all active transports</li>
</ul>
<h2 id="setup" class="tsd-anchor-link">Setup<a href="#setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ol>
<li>Install dependencies:</li>
</ol>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span>
</code><button type="button">Copy</button></pre>

<ol start="2">
<li>Configure environment variables:</li>
</ol>
<pre><code class="bash"><span class="hl-0">cp</span><span class="hl-1"> </span><span class="hl-2">.env.example</span><span class="hl-1"> </span><span class="hl-2">.env</span><br/><span class="hl-3"># Edit .env with your Autotask credentials and optional auth secret</span>
</code><button type="button">Copy</button></pre>

<ol start="3">
<li>Run the server:</li>
</ol>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">dev</span>
</code><button type="button">Copy</button></pre>

<h2 id="environment-variables" class="tsd-anchor-link">Environment Variables<a href="#environment-variables" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><code>AUTOTASK_API_INTEGRATION_CODE</code> - Your Autotask API integration code</li>
<li><code>AUTOTASK_USERNAME</code> - Your Autotask username/email</li>
<li><code>AUTOTASK_SECRET</code> - Your Autotask API secret</li>
<li><code>MCP_AUTH_SECRET</code> - (Optional) Bearer token for client authentication</li>
</ul>
<h2 id="security" class="tsd-anchor-link">Security<a href="#security" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This server implements two-factor authentication:</p>
<ol>
<li>
<p><strong>Bearer Token Authentication</strong> (First Factor)</p>
<ul>
<li>Set <code>MCP_AUTH_SECRET</code> environment variable</li>
<li>Clients must include <code>Authorization</code> header with matching token</li>
</ul>
</li>
<li>
<p><strong>IP Whitelist</strong> (Second Factor - HITL)</p>
<ul>
<li>Managed via <code>.whitelist</code> file in project root</li>
<li>Add one IP address per line</li>
<li>Lines starting with <code>#</code> are treated as comments</li>
<li>Unknown IPs are blocked and logged with warnings</li>
<li>Localhost IPs (<code>127.0.0.1</code>, <code>::1</code>) are pre-configured for development</li>
</ul>
</li>
</ol>
<h3 id="adding-ips-to-whitelist" class="tsd-anchor-link">Adding IPs to Whitelist<a href="#adding-ips-to-whitelist" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>When Retell (or any client) first attempts to connect, the server will log:</p>
<pre><code><span class="hl-1">⚠️  </span><span class="hl-4">WARNING</span><span class="hl-1">: </span><span class="hl-5">Unknown</span><span class="hl-1"> </span><span class="hl-6">IP</span><span class="hl-1"> </span><span class="hl-5">attempting</span><span class="hl-1"> </span><span class="hl-5">connection</span><span class="hl-1">!</span><br/><span class="hl-1">⚠️  </span><span class="hl-6">IP</span><span class="hl-1"> </span><span class="hl-4">Address</span><span class="hl-1">: </span><span class="hl-7">203.0</span><span class="hl-1">.</span><span class="hl-7">113.45</span><br/><span class="hl-1">⚠️  </span><span class="hl-4">Method</span><span class="hl-1">: </span><span class="hl-6">POST</span><span class="hl-1"> /</span><span class="hl-5">mcp</span><br/><span class="hl-1">⚠️  </span><span class="hl-5">User</span><span class="hl-1">-</span><span class="hl-4">Agent</span><span class="hl-1">: ...</span><br/><span class="hl-1">⚠️  </span><span class="hl-5">Add</span><span class="hl-1"> </span><span class="hl-8">this</span><span class="hl-1"> </span><span class="hl-6">IP</span><span class="hl-1"> </span><span class="hl-5">to</span><span class="hl-1"> .</span><span class="hl-5">whitelist</span><span class="hl-1"> </span><span class="hl-5">file</span><span class="hl-1"> </span><span class="hl-9">if</span><span class="hl-1"> </span><span class="hl-5">legitimate</span>
</code><button>Copy</button></pre>

<p>To whitelist the IP:</p>
<ol>
<li>Open <code>.whitelist</code> file</li>
<li>Add the IP address on a new line</li>
<li>Restart the server</li>
<li>The IP will now be allowed through</li>
</ol>
<p>Example <code>.whitelist</code>:</p>
<pre><code><span class="hl-1"># </span><span class="hl-5">Development</span><br/><span class="hl-7">127.0</span><span class="hl-1">.</span><span class="hl-7">0.1</span><br/><span class="hl-1">::</span><span class="hl-7">1</span><br/><br/><span class="hl-1"># </span><span class="hl-5">Retell</span><span class="hl-1"> </span><span class="hl-6">AI</span><span class="hl-1"> </span><span class="hl-5">servers</span><br/><span class="hl-7">203.0</span><span class="hl-1">.</span><span class="hl-7">113.45</span><br/><span class="hl-7">198.51</span><span class="hl-1">.</span><span class="hl-7">100.10</span>
</code><button>Copy</button></pre>

<h2 id="project-structure" class="tsd-anchor-link">Project Structure<a href="#project-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code><span class="hl-5">src</span><span class="hl-1">/</span><br/><span class="hl-1">├── </span><span class="hl-5">server</span><span class="hl-1">.</span><span class="hl-5">ts</span><span class="hl-1">                    # </span><span class="hl-5">Main</span><span class="hl-1"> </span><span class="hl-5">Express</span><span class="hl-1"> </span><span class="hl-5">server</span><span class="hl-1"> </span><span class="hl-9">with</span><span class="hl-1"> </span><span class="hl-6">MCP</span><span class="hl-1"> </span><span class="hl-5">endpoint</span><br/><span class="hl-1">├── </span><span class="hl-5">whitelist</span><span class="hl-1">.</span><span class="hl-5">ts</span><span class="hl-1">                 # </span><span class="hl-6">IP</span><span class="hl-1"> </span><span class="hl-5">whitelist</span><span class="hl-1"> </span><span class="hl-5">management</span><span class="hl-1"> </span><span class="hl-10">module</span><br/><span class="hl-1">├── </span><span class="hl-5">mcp</span><span class="hl-1">/</span><br/><span class="hl-1">│   ├── </span><span class="hl-5">server</span><span class="hl-1">.</span><span class="hl-5">ts</span><span class="hl-1">               # </span><span class="hl-6">MCP</span><span class="hl-1"> </span><span class="hl-5">server</span><span class="hl-1"> </span><span class="hl-5">initialization</span><br/><span class="hl-1">│   └── </span><span class="hl-5">tools</span><span class="hl-1">/</span><br/><span class="hl-1">│       └── </span><span class="hl-5">createTicket</span><span class="hl-1">.</span><span class="hl-5">ts</span><span class="hl-1">     # </span><span class="hl-5">Tool</span><span class="hl-1"> </span><span class="hl-5">definitions</span><span class="hl-1"> </span><span class="hl-5">and</span><span class="hl-1"> </span><span class="hl-5">handlers</span><br/><span class="hl-1">└── </span><span class="hl-5">api</span><span class="hl-1">/</span><br/><span class="hl-1">    └── </span><span class="hl-5">autotask</span><span class="hl-1">.</span><span class="hl-5">ts</span><span class="hl-1">             # </span><span class="hl-5">Autotask</span><span class="hl-1"> </span><span class="hl-6">API</span><span class="hl-1"> </span><span class="hl-5">client</span><br/><span class="hl-1">.</span><span class="hl-5">whitelist</span><span class="hl-1">                       # </span><span class="hl-6">IP</span><span class="hl-1"> </span><span class="hl-0">whitelist</span><span class="hl-1"> (</span><span class="hl-5">not</span><span class="hl-1"> </span><span class="hl-5">committed</span><span class="hl-1"> </span><span class="hl-5">to</span><span class="hl-1"> </span><span class="hl-5">git</span><span class="hl-1">)</span>
</code><button>Copy</button></pre>

<h2 id="adding-new-tools" class="tsd-anchor-link">Adding New Tools<a href="#adding-new-tools" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>To add a new tool to the MCP server:</p>
<h3 id="1-create-the-api-function-if-needed" class="tsd-anchor-link">1. Create the API function (if needed)<a href="#1-create-the-api-function-if-needed" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Add your API call to the appropriate file in <code>src/api/</code>:</p>
<pre><code class="typescript"><span class="hl-3">// src/api/autotask.ts or create a new file</span><br/><span class="hl-9">export</span><span class="hl-1"> </span><span class="hl-8">async</span><span class="hl-1"> </span><span class="hl-8">function</span><span class="hl-1"> </span><span class="hl-0">myNewApiCall</span><span class="hl-1">(</span><span class="hl-5">params</span><span class="hl-1">: </span><span class="hl-10">MyParams</span><span class="hl-1">): </span><span class="hl-10">Promise</span><span class="hl-1">&lt;</span><span class="hl-10">MyResponse</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-3">// Your API logic here</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="2-create-a-new-tool-file" class="tsd-anchor-link">2. Create a new tool file<a href="#2-create-a-new-tool-file" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Create a new file in <code>src/mcp/tools/</code>:</p>
<pre><code class="typescript"><span class="hl-3">// src/mcp/tools/myNewTool.ts</span><br/><span class="hl-9">import</span><span class="hl-1"> { </span><span class="hl-5">z</span><span class="hl-1"> } </span><span class="hl-9">from</span><span class="hl-1"> </span><span class="hl-2">&#39;zod&#39;</span><br/><span class="hl-9">import</span><span class="hl-1"> { </span><span class="hl-5">CallToolResult</span><span class="hl-1"> } </span><span class="hl-9">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@modelcontextprotocol/sdk/types.js&#39;</span><br/><span class="hl-9">import</span><span class="hl-1"> { </span><span class="hl-5">myNewApiCall</span><span class="hl-1"> } </span><span class="hl-9">from</span><span class="hl-1"> </span><span class="hl-2">&#39;../api/yourApi.js&#39;</span><br/><br/><span class="hl-9">export</span><span class="hl-1"> </span><span class="hl-8">const</span><span class="hl-1"> </span><span class="hl-6">myNewToolSchema</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;myNewTool&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Description of what this tool does&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">inputSchema:</span><span class="hl-1"> </span><span class="hl-5">z</span><span class="hl-1">.</span><span class="hl-0">object</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-5">param1:</span><span class="hl-1"> </span><span class="hl-5">z</span><span class="hl-1">.</span><span class="hl-0">string</span><span class="hl-1">().</span><span class="hl-0">describe</span><span class="hl-1">(</span><span class="hl-2">&#39;Description of param1&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">    </span><span class="hl-5">param2:</span><span class="hl-1"> </span><span class="hl-5">z</span><span class="hl-1">.</span><span class="hl-0">number</span><span class="hl-1">().</span><span class="hl-0">optional</span><span class="hl-1">().</span><span class="hl-0">describe</span><span class="hl-1">(</span><span class="hl-2">&#39;Description of param2&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-9">export</span><span class="hl-1"> </span><span class="hl-8">async</span><span class="hl-1"> </span><span class="hl-8">function</span><span class="hl-1"> </span><span class="hl-0">myNewToolHandler</span><span class="hl-1">(</span><span class="hl-5">params</span><span class="hl-1">: {</span><br/><span class="hl-1">  </span><span class="hl-5">param1</span><span class="hl-1">: </span><span class="hl-10">string</span><br/><span class="hl-1">  </span><span class="hl-5">param2</span><span class="hl-1">?: </span><span class="hl-10">number</span><br/><span class="hl-1">}): </span><span class="hl-10">Promise</span><span class="hl-1">&lt;</span><span class="hl-10">CallToolResult</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-9">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">const</span><span class="hl-1"> </span><span class="hl-6">result</span><span class="hl-1"> = </span><span class="hl-9">await</span><span class="hl-1"> </span><span class="hl-0">myNewApiCall</span><span class="hl-1">(</span><span class="hl-5">params</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-9">return</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">content:</span><span class="hl-1"> [{</span><br/><span class="hl-1">        </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;text&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">text:</span><span class="hl-1"> </span><span class="hl-2">`Success: </span><span class="hl-8">${</span><span class="hl-5">result</span><span class="hl-8">}</span><span class="hl-2">`</span><br/><span class="hl-1">      }]</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  } </span><span class="hl-9">catch</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-9">return</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">content:</span><span class="hl-1"> [{</span><br/><span class="hl-1">        </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;text&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">text:</span><span class="hl-1"> </span><span class="hl-2">`Error: </span><span class="hl-8">${</span><span class="hl-5">error</span><span class="hl-11"> </span><span class="hl-8">instanceof</span><span class="hl-11"> </span><span class="hl-10">Error</span><span class="hl-11"> </span><span class="hl-1">?</span><span class="hl-11"> </span><span class="hl-5">error</span><span class="hl-11">.</span><span class="hl-5">message</span><span class="hl-11"> </span><span class="hl-1">:</span><span class="hl-11"> </span><span class="hl-0">String</span><span class="hl-11">(</span><span class="hl-5">error</span><span class="hl-11">)</span><span class="hl-8">}</span><span class="hl-2">`</span><br/><span class="hl-1">      }],</span><br/><span class="hl-1">      </span><span class="hl-5">isError:</span><span class="hl-1"> </span><span class="hl-8">true</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="3-register-the-tool" class="tsd-anchor-link">3. Register the tool<a href="#3-register-the-tool" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Update <code>src/mcp/server.ts</code> to register your new tool:</p>
<pre><code class="typescript"><span class="hl-9">import</span><span class="hl-1"> { </span><span class="hl-5">myNewToolSchema</span><span class="hl-1">, </span><span class="hl-5">myNewToolHandler</span><span class="hl-1"> } </span><span class="hl-9">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./tools/myNewTool.js&#39;</span><br/><br/><span class="hl-9">export</span><span class="hl-1"> </span><span class="hl-8">function</span><span class="hl-1"> </span><span class="hl-0">createMcpServer</span><span class="hl-1">(): </span><span class="hl-10">McpServer</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">// ... existing code ...</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-3">// Register your new tool</span><br/><span class="hl-1">  </span><span class="hl-5">server</span><span class="hl-1">.</span><span class="hl-0">registerTool</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-5">myNewToolSchema</span><span class="hl-1">.</span><span class="hl-5">name</span><span class="hl-1">,</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">description:</span><span class="hl-1"> </span><span class="hl-5">myNewToolSchema</span><span class="hl-1">.</span><span class="hl-5">description</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">inputSchema:</span><span class="hl-1"> </span><span class="hl-5">myNewToolSchema</span><span class="hl-1">.</span><span class="hl-5">inputSchema</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-5">myNewToolHandler</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;✓ Server created with tools:&#39;</span><span class="hl-1">, [</span><span class="hl-2">&#39;createTicket&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;myNewTool&#39;</span><span class="hl-1">])</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-9">return</span><span class="hl-1"> </span><span class="hl-5">server</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>That's it! Your new tool is now available via the MCP server.</p>
<h2 id="api-endpoints" class="tsd-anchor-link">API Endpoints<a href="#api-endpoints" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="post-mcp" class="tsd-anchor-link">POST /mcp<a href="#post-mcp" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The main MCP endpoint. Accepts JSON-RPC 2.0 requests.</p>
<p><strong>Headers:</strong></p>
<ul>
<li><code>Content-Type: application/json</code></li>
<li><code>Authorization: &lt;MCP_AUTH_SECRET&gt;</code> (if auth is enabled)</li>
</ul>
<p><strong>Security:</strong></p>
<ul>
<li>Requests must come from a whitelisted IP address (if whitelist is configured)</li>
<li>Must include valid Authorization header (if MCP_AUTH_SECRET is set)</li>
</ul>
<p><strong>Available Tools:</strong></p>
<ul>
<li><code>createTicket</code> - Create an Autotask ticket (service request or incident)</li>
</ul>
<h2 id="license" class="tsd-anchor-link">License<a href="#license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>See LICENSE file.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#autotask-mcp-for-retell"><span>Autotask <wbr/>MCP for <wbr/>Retell</span></a><ul><li><a href="#features"><span>Features</span></a></li><li><a href="#architecture"><span>Architecture</span></a></li><li><ul><li><a href="#endpoints"><span>Endpoints</span></a></li><li><a href="#memory-management"><span>Memory <wbr/>Management</span></a></li></ul></li><li><a href="#setup"><span>Setup</span></a></li><li><a href="#environment-variables"><span>Environment <wbr/>Variables</span></a></li><li><a href="#security"><span>Security</span></a></li><li><ul><li><a href="#adding-ips-to-whitelist"><span>Adding <wbr/>I<wbr/>Ps to <wbr/>Whitelist</span></a></li></ul></li><li><a href="#project-structure"><span>Project <wbr/>Structure</span></a></li><li><a href="#adding-new-tools"><span>Adding <wbr/>New <wbr/>Tools</span></a></li><li><ul><li><a href="#1-create-the-api-function-if-needed"><span>1. <wbr/>Create the <wbr/>API function (if needed)</span></a></li><li><a href="#2-create-a-new-tool-file"><span>2. <wbr/>Create a new tool file</span></a></li><li><a href="#3-register-the-tool"><span>3. <wbr/>Register the tool</span></a></li></ul></li><li><a href="#api-endpoints"><span>API <wbr/>Endpoints</span></a></li><li><ul><li><a href="#post-mcp"><span>POST /mcp</span></a></li></ul></li><li><a href="#license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/raulduk3/autotask-mcp-retell" class="tsd-nav-link">GitHub</a></nav><nav class="tsd-navigation"><a href="modules.html">Autotask MCP Server - v0.1.0</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
